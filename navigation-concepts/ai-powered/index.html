<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Task Navigator - GRC Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* AI Animations */
        .ai-pulse { animation: aiPulse 2s infinite; }
        .ai-thinking { animation: thinking 1.5s infinite; }
        .ai-glow { animation: glow 3s ease-in-out infinite alternate; }
        .slide-in { animation: slideIn 0.5s ease-out; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        
        @keyframes aiPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }
        
        @keyframes thinking {
            0%, 60% { opacity: 0.3; }
            30% { opacity: 1; }
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
            to { box-shadow: 0 0 30px rgba(99, 102, 241, 0.6); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* AI Prediction Cards */
        .prediction-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .prediction-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        /* Smart Search */
        .smart-search {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        /* Progress Indicators */
        .progress-bar {
            transition: width 1s ease-in-out;
        }
        
        /* AI Status Indicator */
        .ai-status {
            animation: statusPulse 2s infinite;
        }
        
        @keyframes statusPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        /* Notification styles */
        .notification {
            transform: translateX(100%);
            transition: transform 0.3s ease-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        /* Learning feedback */
        .feedback-bubble {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- AI Status Bar -->
    <div class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full ai-status"></div>
                        <span class="text-sm font-medium text-gray-700">AI Assistant Active</span>
                    </div>
                    <div class="text-sm text-gray-500" id="ai-status-text">Analyzing patterns...</div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="configure-ai" class="text-sm text-blue-600 hover:text-blue-800 px-3 py-1 rounded">
                        Configure AI
                    </button>
                    <div id="role-selector"></div>
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                            <span class="text-sm font-medium text-white">SC</span>
                        </div>
                        <span class="text-sm font-medium text-gray-700">Sarah Chen</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto px-6 py-8">
        <!-- AI Recommendations Header -->
        <div class="prediction-card rounded-xl p-6 mb-8 text-white">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold mb-2">ü§ñ AI Recommendations</h1>
                    <p class="text-blue-100">Based on your role and recent activity</p>
                </div>
                <div class="text-right">
                    <div class="text-sm opacity-90" id="ai-confidence">Confidence: 94%</div>
                    <div class="text-xs opacity-75" id="last-updated">Updated 2 min ago</div>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Left Panel: Smart Task Flow -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Smart Task Flow</h3>
                        <span class="px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full">
                            AI Powered
                        </span>
                    </div>
                    
                    <!-- AI Suggested Next Steps -->
                    <div class="mb-6">
                        <div class="flex items-center mb-3">
                            <div class="w-6 h-6 ai-pulse bg-red-500 rounded-full flex items-center justify-center mr-2">
                                <span class="text-white text-xs">!</span>
                            </div>
                            <span class="font-medium text-gray-800">AI Suggested Next Steps</span>
                        </div>
                        <div id="ai-suggestions" class="space-y-2">
                            <!-- AI suggestions will be populated here -->
                        </div>
                    </div>

                    <!-- Compliance Progress -->
                    <div class="mb-6">
                        <h4 class="font-medium text-gray-800 mb-3">Compliance Progress</h4>
                        <div class="space-y-3" id="compliance-progress">
                            <!-- Progress items will be populated here -->
                        </div>
                    </div>

                    <!-- Smart Search -->
                    <div class="smart-search rounded-lg p-4 text-white">
                        <h4 class="font-medium mb-3">üîç Smart Search</h4>
                        <div class="relative">
                            <input 
                                type="text" 
                                id="smart-search-input"
                                placeholder="Ask me anything about requirements..."
                                class="w-full px-3 py-2 text-gray-800 rounded-lg text-sm"
                            >
                            <div class="absolute right-2 top-1/2 transform -translate-y-1/2">
                                <div class="w-4 h-4 ai-thinking bg-gray-400 rounded-full"></div>
                            </div>
                        </div>
                        <div class="text-xs opacity-90 mt-2">Try: "security for APIs" or "quality requirements"</div>
                    </div>
                </div>

                <!-- Proactive Alerts -->
                <div class="bg-white rounded-xl shadow-lg p-6 mt-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">üö® Proactive Alerts</h3>
                    <div id="proactive-alerts" class="space-y-3">
                        <!-- Alerts will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Center Panel: Asset Overview -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Asset Overview</h3>
                    
                    <!-- Current Asset Context -->
                    <div id="current-asset" class="mb-6">
                        <!-- Asset info will be populated here -->
                    </div>

                    <!-- AI Smart Analysis -->
                    <div class="bg-blue-50 rounded-lg p-4 mb-6">
                        <div class="flex items-center mb-3">
                            <div class="w-6 h-6 ai-glow bg-blue-500 rounded-full flex items-center justify-center mr-2">
                                <span class="text-white text-xs">ü§ñ</span>
                            </div>
                            <span class="font-medium text-blue-900">AI Smart Analysis</span>
                            <span class="ml-auto text-xs text-blue-600" id="analysis-confidence">Confidence: --</span>
                        </div>
                        <div id="ai-analysis" class="text-sm text-blue-800">
                            <!-- AI analysis will be populated here -->
                        </div>
                    </div>

                    <!-- AI-Prioritized Requirements -->
                    <div>
                        <div class="flex items-center justify-between mb-3">
                            <span class="font-medium text-gray-800">AI-Prioritized Requirements</span>
                            <div class="flex items-center text-xs text-green-600">
                                <div class="w-2 h-2 bg-green-500 rounded-full mr-1 ai-pulse"></div>
                                Auto-updating
                            </div>
                        </div>
                        <div id="prioritized-requirements" class="space-y-2">
                            <!-- Requirements will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Predictive Insights & AI Learning -->
            <div class="lg:col-span-1">
                <!-- Predictive Insights -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="text-lg">üîÆ</span>
                        <h3 class="text-lg font-semibold text-gray-900 ml-2">Predictive Insights</h3>
                    </div>
                    
                    <div class="bg-yellow-50 rounded-lg p-4 mb-4">
                        <h4 class="font-medium text-yellow-900 mb-2">Live AI Updates</h4>
                        <div id="live-updates" class="text-sm text-yellow-800">
                            <!-- Live updates will be populated here -->
                        </div>
                    </div>

                    <div id="predictive-insights" class="space-y-3">
                        <!-- Insights will be populated here -->
                    </div>
                </div>

                <!-- AI Learning -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center mb-4">
                        <span class="text-lg">üìà</span>
                        <h3 class="text-lg font-semibold text-gray-900 ml-2">AI Learning</h3>
                    </div>

                    <div class="mb-4">
                        <h4 class="font-medium text-gray-800 mb-3">AI Learning Progress:</h4>
                        <div class="space-y-3" id="learning-progress">
                            <!-- Learning progress will be populated here -->
                        </div>
                    </div>

                    <div class="mb-4">
                        <h4 class="font-medium text-gray-800 mb-3">Dynamic Insights:</h4>
                        <div id="dynamic-insights" class="text-sm text-gray-600">
                            <!-- Dynamic insights will be populated here -->
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">Personal AI Model:</h4>
                        <div id="personal-model-stats" class="space-y-2 text-sm">
                            <!-- Personal model stats will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Feedback Bubble -->
    <div id="ai-feedback" class="fixed bottom-6 right-6 feedback-bubble rounded-full p-4 shadow-lg hidden">
        <div class="flex items-center space-x-2">
            <div class="w-3 h-3 ai-thinking bg-purple-500 rounded-full"></div>
            <span class="text-sm font-medium text-purple-800">AI is learning from your actions...</span>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="fixed top-20 right-6 space-y-2 z-40">
        <!-- Notifications will be added here -->
    </div>

    <!-- Analytics Dashboard -->
    <div id="analytics-dashboard" class="mt-8"></div>

    <!-- Scripts -->
    <script type="module">
        import { 
            mockUsers, mockAssets, mockRequirements, trackInteraction, trackNavigation,
            getAssetsByUser, getRequirementsForAsset, navigationAnalytics
        } from '../shared/mockData.js';
        
        import { 
            RoleSelector, RequirementCard, AssetCard, AnalyticsDashboard, Toast
        } from '../shared/components.js';

        // AI-Powered Task Navigator
        class AITaskNavigator {
            constructor() {
                this.currentUser = mockUsers.architect;
                this.currentAsset = null;
                this.aiLearningData = {
                    sessionsAnalyzed: 47,
                    accuracyImprovement: 23,
                    timeSaved: 2.3,
                    patternRecognition: 85,
                    predictionAccuracy: 78,
                    userAdaptation: 92
                };
                this.notifications = [];
                this.aiSuggestions = [];
                this.learningFeedback = false;
                this.init();
            }

            init() {
                this.setupComponents();
                this.setupEventListeners();
                this.populateAISuggestions();
                this.updateAssetOverview();
                this.updatePredictiveInsights();
                this.updateAILearning();
                this.startAISimulation();
                this.setupProactiveAlerts();
            }

            setupComponents() {
                // Role Selector
                const roleContainer = document.getElementById('role-selector');
                new RoleSelector(roleContainer, ['architect', 'developer', 'manager'], 
                    this.currentUser.role, (newRole) => this.handleRoleChange(newRole));

                // Set initial asset
                const assets = getAssetsByUser(this.currentUser.role);
                this.currentAsset = assets[0];
            }

            setupEventListeners() {
                // Smart Search
                const searchInput = document.getElementById('smart-search-input');
                searchInput.addEventListener('input', (e) => this.handleSmartSearch(e.target.value));
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.executeSmartSearch(e.target.value);
                    }
                });

                // Configure AI
                document.getElementById('configure-ai').addEventListener('click', () => {
                    this.showAIConfiguration();
                });

                // Track all interactions for AI learning
                document.addEventListener('click', (e) => {
                    if (e.target.closest('[data-ai-track]')) {
                        this.trackAIInteraction(e.target.closest('[data-ai-track]').dataset.aiTrack);
                    }
                });
            }

            populateAISuggestions() {
                const suggestions = [
                    {
                        icon: 'üéØ',
                        title: 'Complete Security Assessment',
                        description: 'Based on your recent API changes',
                        priority: 'high',
                        confidence: 94,
                        action: () => this.executeSuggestion('security-assessment')
                    },
                    {
                        icon: 'üìã',
                        title: 'Review Quality Requirements',
                        description: 'Performance standards need attention',
                        priority: 'medium',
                        confidence: 87,
                        action: () => this.executeSuggestion('quality-review')
                    },
                    {
                        icon: 'üîÑ',
                        title: 'Update Asset Documentation',
                        description: 'AI detected outdated specifications',
                        priority: 'low',
                        confidence: 76,
                        action: () => this.executeSuggestion('update-docs')
                    }
                ];

                const container = document.getElementById('ai-suggestions');
                container.innerHTML = suggestions.map((suggestion, index) => {
                    const priorityColor = {
                        'high': 'border-red-200 bg-red-50',
                        'medium': 'border-yellow-200 bg-yellow-50',
                        'low': 'border-blue-200 bg-blue-50'
                    }[suggestion.priority];

                    return `
                        <div class="suggestion-card p-3 border rounded-lg cursor-pointer transition-all hover:shadow-md ${priorityColor} slide-in"
                             data-ai-track="suggestion-${index}"
                             onclick="window.aiNavigator.executeSuggestion('${suggestion.title}', ${index})">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center">
                                    <span class="text-lg mr-2">${suggestion.icon}</span>
                                    <span class="text-sm font-medium text-gray-800">${suggestion.title}</span>
                                </div>
                                <span class="text-xs text-gray-500">${suggestion.confidence}%</span>
                            </div>
                            <p class="text-xs text-gray-600">${suggestion.description}</p>
                        </div>
                    `;
                }).join('');

                this.aiSuggestions = suggestions;

                // Update compliance progress
                this.updateComplianceProgress();
            }

            updateComplianceProgress() {
                const progressItems = [
                    { label: 'Starting assessment...', progress: 15, status: 'in-progress' },
                    { label: 'Estimated completion:', value: '45 min', status: 'pending' }
                ];

                const container = document.getElementById('compliance-progress');
                container.innerHTML = progressItems.map(item => {
                    if (item.progress !== undefined) {
                        return `
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-600">${item.label}</span>
                                    <span class="font-medium">${item.progress}%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="progress-bar bg-blue-600 h-2 rounded-full" style="width: ${item.progress}%"></div>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">${item.label}</span>
                                <span class="text-blue-600 font-medium">${item.value}</span>
                            </div>
                        `;
                    }
                }).join('');
            }

            updateAssetOverview() {
                const assetContainer = document.getElementById('current-asset');
                assetContainer.innerHTML = `
                    <div class="border border-gray-200 rounded-lg p-4">
                        <div class="flex items-center mb-3">
                            <span class="text-2xl mr-3">${this.getAssetIcon(this.currentAsset.type)}</span>
                            <div>
                                <h4 class="font-semibold text-gray-900">${this.currentAsset.name}</h4>
                                <p class="text-sm text-gray-600">${this.currentAsset.type} ‚Ä¢ ${this.currentAsset.domain}</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gray-600">Compliance:</span>
                                <span class="font-medium ml-1">${this.currentAsset.complianceScore}%</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Risks:</span>
                                <span class="font-medium ml-1">${Object.values(this.currentAsset.riskCount).reduce((a, b) => a + b, 0)}</span>
                            </div>
                        </div>
                    </div>
                `;

                // Update AI Analysis
                setTimeout(() => this.updateAIAnalysis(), 1000);
                
                // Update prioritized requirements
                setTimeout(() => this.updatePrioritizedRequirements(), 2000);
            }

            updateAIAnalysis() {
                const confidence = Math.floor(85 + Math.random() * 10);
                document.getElementById('analysis-confidence').textContent = `Confidence: ${confidence}%`;
                
                const analysisContainer = document.getElementById('ai-analysis');
                analysisContainer.innerHTML = `
                    <div class="fade-in">
                        <p class="mb-2">‚úÖ <strong>High priority:</strong> Security requirements need immediate attention</p>
                        <p class="mb-2">‚ö†Ô∏è <strong>Medium risk:</strong> Performance standards may impact user experience</p>
                        <p>üìä <strong>Recommendation:</strong> Focus on API security assessment first</p>
                    </div>
                `;
            }

            updatePrioritizedRequirements() {
                const requirements = getRequirementsForAsset(this.currentAsset).slice(0, 4);
                const container = document.getElementById('prioritized-requirements');
                
                container.innerHTML = requirements.map((req, index) => {
                    const aiScore = Math.floor(70 + Math.random() * 30);
                    const priorityColors = ['bg-red-100 text-red-700', 'bg-yellow-100 text-yellow-700', 'bg-blue-100 text-blue-700', 'bg-green-100 text-green-700'];
                    
                    return `
                        <div class="requirement-card p-3 border border-gray-200 rounded-lg hover:border-blue-300 cursor-pointer transition-all slide-in"
                             data-ai-track="requirement-${index}"
                             style="animation-delay: ${index * 0.1}s">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-800">${req.title}</span>
                                <span class="px-2 py-1 text-xs rounded-full ${priorityColors[index]}">
                                    AI: ${aiScore}%
                                </span>
                            </div>
                            <p class="text-xs text-gray-600">${req.description.substring(0, 80)}...</p>
                        </div>
                    `;
                }).join('');
            }

            updatePredictiveInsights() {
                // Live Updates
                const liveUpdates = [
                    "Monitoring compliance patterns...",
                    "Analyzing user behavior trends...",
                    "Predicting upcoming requirements...",
                    "Optimizing task prioritization..."
                ];

                let updateIndex = 0;
                const updateLiveStatus = () => {
                    document.getElementById('live-updates').textContent = liveUpdates[updateIndex];
                    updateIndex = (updateIndex + 1) % liveUpdates.length;
                };

                updateLiveStatus();
                setInterval(updateLiveStatus, 3000);

                // Predictive Insights
                const insights = [
                    {
                        icon: 'üìà',
                        title: 'Compliance Trend',
                        value: '+12%',
                        description: 'Expected improvement this quarter'
                    },
                    {
                        icon: '‚è±Ô∏è',
                        title: 'Time to Compliance',
                        value: '3.2 days',
                        description: 'Based on current velocity'
                    },
                    {
                        icon: 'üéØ',
                        title: 'Success Probability',
                        value: '94%',
                        description: 'For current assessment path'
                    }
                ];

                const container = document.getElementById('predictive-insights');
                container.innerHTML = insights.map((insight, index) => `
                    <div class="insight-card p-3 bg-gray-50 rounded-lg slide-in" style="animation-delay: ${index * 0.2}s">
                        <div class="flex items-center justify-between mb-1">
                            <div class="flex items-center">
                                <span class="mr-2">${insight.icon}</span>
                                <span class="text-sm font-medium text-gray-800">${insight.title}</span>
                            </div>
                            <span class="text-sm font-bold text-blue-600">${insight.value}</span>
                        </div>
                        <p class="text-xs text-gray-600">${insight.description}</p>
                    </div>
                `).join('');
            }

            updateAILearning() {
                // Learning Progress
                const learningMetrics = [
                    { label: 'Pattern Recognition', value: this.aiLearningData.patternRecognition, color: 'bg-green-500' },
                    { label: 'Prediction Accuracy', value: this.aiLearningData.predictionAccuracy, color: 'bg-blue-500' },
                    { label: 'User Adaptation', value: this.aiLearningData.userAdaptation, color: 'bg-purple-500' }
                ];

                const progressContainer = document.getElementById('learning-progress');
                progressContainer.innerHTML = learningMetrics.map((metric, index) => `
                    <div class="slide-in" style="animation-delay: ${index * 0.1}s">
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-600">${metric.label}</span>
                            <span class="font-medium">${metric.value}%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="progress-bar ${metric.color} h-2 rounded-full" style="width: ${metric.value}%"></div>
                        </div>
                    </div>
                `).join('');

                // Dynamic Insights
                document.getElementById('dynamic-insights').innerHTML = `
                    <div class="space-y-2 fade-in">
                        <div>üß† AI has identified 3 new patterns in your workflow</div>
                        <div>‚ö° Response time improved by 34% this week</div>
                        <div>üéØ Accuracy increased from personal model training</div>
                    </div>
                `;

                // Personal Model Stats
                const stats = [
                    { label: 'Sessions Analyzed', value: this.aiLearningData.sessionsAnalyzed },
                    { label: 'Accuracy Improvement', value: `+${this.aiLearningData.accuracyImprovement}%` },
                    { label: 'Time Saved', value: `${this.aiLearningData.timeSaved} hrs` }
                ];

                document.getElementById('personal-model-stats').innerHTML = stats.map((stat, index) => `
                    <div class="flex justify-between slide-in" style="animation-delay: ${index * 0.05}s">
                        <span class="text-gray-600">${stat.label}</span>
                        <span class="font-medium text-gray-900">${stat.value}</span>
                    </div>
                `).join('');
            }

            setupProactiveAlerts() {
                const alerts = [
                    {
                        type: 'warning',
                        icon: '‚ö†Ô∏è',
                        title: 'Compliance Deadline',
                        message: 'Security assessment due in 2 days',
                        action: 'Review Now'
                    },
                    {
                        type: 'info',
                        icon: 'üìã',
                        title: 'New Requirements',
                        message: '3 new standards published for your domain',
                        action: 'View Updates'
                    },
                    {
                        type: 'success',
                        icon: '‚úÖ',
                        title: 'AI Optimization',
                        message: 'Workflow efficiency improved by 15%',
                        action: 'Learn More'
                    }
                ];

                const container = document.getElementById('proactive-alerts');
                container.innerHTML = alerts.map((alert, index) => {
                    const typeColors = {
                        'warning': 'border-yellow-200 bg-yellow-50',
                        'info': 'border-blue-200 bg-blue-50',
                        'success': 'border-green-200 bg-green-50'
                    };

                    return `
                        <div class="alert-card p-3 border rounded-lg ${typeColors[alert.type]} slide-in"
                             data-ai-track="alert-${index}"
                             style="animation-delay: ${index * 0.2}s">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center">
                                    <span class="mr-2">${alert.icon}</span>
                                    <span class="text-sm font-medium text-gray-800">${alert.title}</span>
                                </div>
                            </div>
                            <p class="text-xs text-gray-600 mb-2">${alert.message}</p>
                            <button class="text-xs text-blue-600 hover:text-blue-800 font-medium"
                                    onclick="window.aiNavigator.handleAlertAction('${alert.action}')">
                                ${alert.action}
                            </button>
                        </div>
                    `;
                }).join('');
            }

            startAISimulation() {
                // Simulate AI status updates
                const statusUpdates = [
                    "Analyzing patterns...",
                    "Learning from interactions...",
                    "Optimizing recommendations...",
                    "Monitoring compliance trends...",
                    "Processing feedback..."
                ];

                let statusIndex = 0;
                setInterval(() => {
                    document.getElementById('ai-status-text').textContent = statusUpdates[statusIndex];
                    statusIndex = (statusIndex + 1) % statusUpdates.length;
                }, 4000);

                // Simulate confidence updates
                setInterval(() => {
                    const confidence = Math.floor(90 + Math.random() * 8);
                    document.getElementById('ai-confidence').textContent = `Confidence: ${confidence}%`;
                }, 15000);

                // Simulate learning feedback
                setInterval(() => {
                    if (Math.random() < 0.3) {
                        this.showLearningFeedback();
                    }
                }, 10000);
            }

            handleSmartSearch(query) {
                if (query.length > 2) {
                    // Simulate AI processing
                    this.showNotification('AI is processing your query...', 'info');
                }
            }

            executeSmartSearch(query) {
                trackInteraction('ai_search', { query: query.substring(0, 50) });
                this.showNotification(`AI found ${Math.floor(3 + Math.random() * 7)} relevant results for "${query}"`, 'success');
                
                // Simulate learning from search
                setTimeout(() => this.showLearningFeedback(), 2000);
            }

            executeSuggestion(title, index) {
                trackInteraction('ai_suggestion_executed', { suggestion: title, index });
                this.showNotification(`Executing: ${title}`, 'success');
                
                // Update progress
                setTimeout(() => {
                    const progressEl = document.querySelector('#compliance-progress .progress-bar');
                    if (progressEl) {
                        const newProgress = Math.min(parseInt(progressEl.style.width) + 25, 100);
                        progressEl.style.width = `${newProgress}%`;
                        progressEl.parentElement.previousElementSibling.querySelector('span:last-child').textContent = `${newProgress}%`;
                    }
                }, 1000);

                // Show learning feedback
                setTimeout(() => this.showLearningFeedback(), 3000);
            }

            handleAlertAction(action) {
                trackInteraction('ai_alert_action', { action });
                this.showNotification(`Action: ${action}`, 'info');
            }

            handleRoleChange(newRole) {
                this.currentUser = mockUsers[newRole];
                trackInteraction('ai_role_change', { role: newRole });
                
                const assets = getAssetsByUser(newRole);
                this.currentAsset = assets[0];
                
                this.updateAssetOverview();
                this.populateAISuggestions();
                
                this.showNotification(`AI adapted to ${newRole} role`, 'success');
                Toast.show(`Switched to ${newRole} role - AI is relearning your patterns`, 'success');
            }

            trackAIInteraction(element) {
                trackInteraction('ai_element_interaction', { element });
                
                // Simulate AI learning
                if (Math.random() < 0.4) {
                    setTimeout(() => this.showLearningFeedback(), 1000);
                }
            }

            showAIConfiguration() {
                this.showNotification('AI Configuration panel would open here', 'info');
            }

            showLearningFeedback() {
                if (this.learningFeedback) return;
                
                this.learningFeedback = true;
                const feedback = document.getElementById('ai-feedback');
                feedback.classList.remove('hidden');
                
                setTimeout(() => {
                    feedback.classList.add('hidden');
                    this.learningFeedback = false;
                }, 3000);
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `notification p-3 rounded-lg shadow-lg ${this.getNotificationColor(type)} text-white text-sm`;
                notification.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span>${message}</span>
                        <button onclick="this.parentElement.parentElement.remove()" class="ml-3 text-white hover:text-gray-200">√ó</button>
                    </div>
                `;
                
                document.getElementById('notification-container').appendChild(notification);
                
                // Trigger animation
                setTimeout(() => notification.classList.add('show'), 10);
                
                // Auto remove
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 300);
                }, 4000);
            }

            getNotificationColor(type) {
                const colors = {
                    'info': 'bg-blue-500',
                    'success': 'bg-green-500',
                    'warning': 'bg-yellow-500',
                    'error': 'bg-red-500'
                };
                return colors[type] || colors.info;
            }

            getAssetIcon(type) {
                const icons = {
                    'api': 'üîå',
                    'web-app': 'üåê',
                    'mobile-app': 'üì±',
                    'platform': 'üèóÔ∏è'
                };
                return icons[type] || 'üì¶';
            }
        }

        // Initialize AI Task Navigator
        window.aiNavigator = new AITaskNavigator();

        // Analytics Dashboard
        const analyticsContainer = document.getElementById('analytics-dashboard');
        analyticsContainer.innerHTML = AnalyticsDashboard.render && 
            AnalyticsDashboard.render(navigationAnalytics) || '';
    </script>
</body>
</html>